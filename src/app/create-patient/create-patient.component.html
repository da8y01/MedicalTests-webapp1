<app-header></app-header>

<main class="main-contenedor-add-paciente">
  <section class="grid-main-contenedor-add-paciente">
    <img src="images/img-pacientes.png" />
    <section class="form-add-paciente">
      <form
        [formGroup]="patientForm"
        (ngSubmit)="onSubmit()"
        enctype="multipart/form-data"
      >
        <div class="grid-form">
          <div class="form-campos-datos-personales">
            <div>
              <label for="first-name">
                <h2>Nombre</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="first-name"
                id="first-name"
                #firstName
                formControlName="firstName"
              />
            </div>
            <div>
              <label for="last-name">
                <h2>Apellido</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="last-name"
                id="last-name"
                #lastName
                formControlName="lastName"
              />
            </div>
            <div>
              <label for="document-type">
                <h2>Tipo de documento</h2>
              </label>
              <select
                name="document-type"
                class="input-campo_texto"
                id="document-type"
                #documentType
                formControlName="documentType"
              >
                <option value="1">Cédula</option>
                <option value="2">Documento de identidad</option>
                <option value="3">Pasaporte</option>
                <option value="4">NIT</option>
              </select>
            </div>
            <div>
              <label for="password">
                <h2>Contraseña</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="password"
                id="password"
                #password
                value="xxxxxxxxx"
                disabled
              />
            </div>
            <div>
              <label for="username">
                <h2>Número de documento</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="username"
                id="username"
                #username
                formControlName="username"
              />
            </div>
            <div>
              <label for="birthdate">
                <h2>Fecha de nacimiento</h2>
              </label>
              <input
                class="input-campo_texto"
                type="date"
                name="birthdate"
                id="birthdate"
                #birthdate
                formControlName="birthdate"
              />
            </div>
            <div>
              <label for="address">
                <h2>Dirección</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="address"
                id="address"
                #address
                formControlName="address"
              />
            </div>
            <div>
              <label for="phone">
                <h2>Celular</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="phone"
                id="phone"
                #phone
                formControlName="address"
              />
            </div>
            <div>
              <label for="email">
                <h2>Correo</h2>
              </label>
              <input
                class="input-campo_texto"
                type="text"
                name="email"
                id="email"
                #email
                formControlName="email"
              />
            </div>
          </div>
          <div class="agregar-examenes" formArrayName="examsArray">
            <h1 class="titulo-examenes">Agregar exámenes</h1>
            <div
              *ngFor="let exam of examsList.controls; let i = index"
              [formGroupName]="i"
            >
              <div class="nombre-examen">
                <h2>Nombre del examen</h2>
                <input
                  class="input-campo_texto"
                  type="text"
                  name="exam_name"
                  id="exam-name"
                  #examName
                  formControlName="name"
                />
              </div>
              <div class="custom-input-file">
                <h2>Cargar examen</h2>
                <button type="button" (click)="fileResult.click()">
                  CARGAR EXAMEN
                </button>
                <input
                  style="display: none"
                  type="file"
                  id="file-result"
                  name="file_result"
                  accept=".pdf,.jpg,.jpeg,.png,.avi,.mp4"
                  aria-label="File browser example"
                  (change)="onFileExam($event, i, examName.value)"
                  #fileResult
                />
              </div>
              <div class="custom-input-file">
                <h2>Cargar lectura</h2>
                <button type="button" (click)="fileReading.click()">
                  CARGAR LECTURA
                </button>
                <input
                  style="display: none"
                  type="file"
                  id="file-reading"
                  name="file_reading"
                  accept=".pdf,.jpg,.jpeg,.png,.avi,.mp4"
                  aria-label="File browser example"
                  (change)="onFileReading($event, i)"
                  #fileReading
                />
              </div>
              <div class="fecha-toma-examen">
                <h2>Fecha toma del examen</h2>
                <input
                  class="input-campo_texto"
                  type="date"
                  name="exam_date"
                  id="exam-date"
                  #examDate
                  formControlName="date"
                />
              </div>
            </div>
            <a href="#" (click)="addExam($event)" class="add-examen-button"
              >Agregar otro examen</a
            >
          </div>
          <div class="add-paciente-button">
            <button
              class="boton-sumit"
              type="submit"
              name="submitButton"
              id="submitButton"
              #submitButton
              [disabled]="!patientForm.valid"
            >
              AGREGAR PACIENTE
            </button>
            <p *ngIf="messages !== ''">{{ messages | json }}</p>
          </div>
        </div>
      </form>
    </section>
  </section>
</main>

<app-footer></app-footer>
